{"version":3,"sources":["webpack:///./src/pages/jx3story/Detail.vue?aa38","webpack:///./src/pages/jx3story/components/Lantern.vue?f51c","webpack:///./src/pages/jx3story/components/Lantern.vue","webpack:///src/pages/jx3story/components/Lantern.vue","webpack:///./src/pages/jx3story/components/Lantern.vue?b2d8","webpack:///./src/pages/jx3story/components/Lantern.vue?87e6","webpack:///./src/service/vote.js","webpack:///./src/pages/jx3story/Detail.vue","webpack:///./src/service/jx3story.js","webpack:///src/pages/jx3story/Detail.vue","webpack:///./src/pages/jx3story/Detail.vue?9ddc","webpack:///./src/pages/jx3story/Detail.vue?f9c9","webpack:///./src/pages/jx3story/components/LanternGroup.vue","webpack:///src/pages/jx3story/components/LanternGroup.vue","webpack:///./src/pages/jx3story/components/LanternGroup.vue?6e94","webpack:///./src/pages/jx3story/components/LanternGroup.vue?118e"],"names":["render","_vm","this","_c","_self","staticClass","style","positionStyle","attrs","to","lanternImage","alt","textImage","textAlt","staticRenderFns","name","inject","props","type","String","required","top","Number","left","lanternPath","textPath","default","computed","concat","__imgRoot","component","getProgramDetail","id","$next","get","getVoteItemQrcode","params","$cms","getVoteJudges","slug","app","then","res","data","items","userPoll","post","nativeOn","$event","handleClick","apply","arguments","getImgUrl","directives","rawName","value","loading","expression","key","domProps","_s","content","_e","_v","_m","voteItems","length","_l","item","i","root","title","user_info","display_name","amount","on","handleVote","getEventAc","_res$data","_res$data$data","post_content","components","LanternGroup","ac_id","__Root","$route","meta","watch","loadData","methods","$router","push","catch","err","loadInfo","_this","finally","loadVote","_this2","vote_items","_ref","_this3","vote_id_list","$message","success","map","v","mounted","Lantern"],"mappings":"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","file":"js/chunk-4c256148.2dcb22d8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Detail.vue?vue&type=style&index=0&id=4f8da9d8&prod&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Lantern.vue?vue&type=style&index=0&id=18f8cbd2&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('router-link',{staticClass:\"lantern\",style:(_vm.positionStyle),attrs:{\"to\":_vm.to}},[_c('img',{staticClass:\"lantern__image\",attrs:{\"src\":_vm.lanternImage,\"alt\":_vm.alt}}),_c('img',{staticClass:\"lantern__text\",attrs:{\"src\":_vm.textImage,\"alt\":_vm.textAlt}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <router-link class=\"lantern\" :to=\"to\" :style=\"positionStyle\">\n        <img class=\"lantern__image\" :src=\"lanternImage\" :alt=\"alt\" />\n        <img class=\"lantern__text\" :src=\"textImage\" :alt=\"textAlt\" />\n    </router-link>\n</template>\n\n<script>\nexport default {\n    name: \"Lantern\",\n    inject: [\"__imgRoot\"],\n    props: {\n        to: {\n            type: String,\n            required: true,\n        },\n        top: {\n            type: [Number, String],\n            required: true,\n        },\n        left: {\n            type: [Number, String],\n            required: true,\n        },\n        lanternPath: {\n            type: String,\n            required: true,\n        },\n        textPath: {\n            type: String,\n            required: true,\n        },\n        alt: {\n            type: String,\n            default: \"灯笼\",\n        },\n        textAlt: {\n            type: String,\n            default: \"文字\",\n        },\n    },\n    computed: {\n        positionStyle() {\n            return {\n                top: typeof this.top === \"number\" ? `${this.top}px` : this.top,\n                left: typeof this.left === \"number\" ? `${this.left}px` : this.left,\n            };\n        },\n        lanternImage() {\n            return this.__imgRoot + this.lanternPath;\n        },\n        textImage() {\n            return this.__imgRoot + this.textPath;\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n.lantern-group {\n    position: fixed;\n    left: 0;\n    top: 60px;\n    width: 300px;\n    height: 640px;\n}\n.lantern {\n    position: absolute;\n    cursor: pointer;\n\n    &:hover .lantern__text {\n        transform: translate(-50%, -50%) scale(1.2);\n    }\n}\n.lantern__text {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 60%;\n    transition: transform 0.3s ease;\n}\n.lantern__image {\n    display: block;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Lantern.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Lantern.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Lantern.vue?vue&type=template&id=18f8cbd2\"\nimport script from \"./Lantern.vue?vue&type=script&lang=js\"\nexport * from \"./Lantern.vue?vue&type=script&lang=js\"\nimport style0 from \"./Lantern.vue?vue&type=style&index=0&id=18f8cbd2&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $next, $cms } from \"@jx3box/jx3box-common/js/https\";\n// 【用户】获取最新的一个公开的投票活动详情\nexport function getNewProgram(params) {\n    return $next().get(`/api/next2/vote-program/program/public/latest`, { params });\n}\n//获取公开投票的详情\nexport function getProgramDetail(id) {\n    return $next().get(`/api/next2/vote-program/program/${id}/public`);\n}\n// /vote-program/program/{id}/public/vote-item/{voteItemId}\n\n// 用户获取公开的投票活动【单项】详情\nexport function getProgramItem(id, voteItemId) {\n    return $next().get(`/api/next2/vote-program/program/${id}/public/vote-item/${voteItemId}`);\n}\n\nexport function getVoteItemQrcode(id, params) {\n    return $cms().get(`/api/cms/vote/program/item/${id}/qrcode`, {\n        params,\n    });\n}\n\nexport function getVoteJudges() {\n    return $cms()\n        .get(`/api/cms/manage/www/block/load`, {\n            params: {\n                slug: \"mid_autumn_2024\",\n                app: \"std\",\n            },\n        })\n        .then((res) => {\n            return res.data.data.items;\n        });\n}\n\n// 用户投票\nexport function userPoll(id, params) {\n    return $next().post(`/api/next2/vote-program/program/${id}/vote`, params);\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"jx3story-event-content p-event-main\"},[_c('LanternGroup'),_c('router-link',{staticClass:\"mini-slogan\",attrs:{\"to\":\"/\"},nativeOn:{\"click\":function($event){return _vm.handleClick.apply(null, arguments)}}},[_c('img',{staticClass:\"event__sign\",attrs:{\"src\":_vm.getImgUrl('/eventcontent/eventc__sign.png'),\"alt\":\"活动标志\"}})]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-main\"},[(_vm.key === 'event')?[_c('div',{staticClass:\"m-content\",domProps:{\"innerHTML\":_vm._s(_vm.content)}})]:_vm._e(),(_vm.key === 'vote')?[_c('div',{staticClass:\"m-content m-content-vote\"},[_c('h2',[_vm._v(\"2024年茶馆风月录投票榜\")]),_c('table',{staticClass:\"m-vote-table\"},[_vm._m(0),(_vm.voteItems && _vm.voteItems.length)?_c('tbody',_vm._l((_vm.voteItems),function(item,i){return _c('tr',{key:i},[_c('td',[_c('span',{staticClass:\"u-id\"},[_vm._v(_vm._s(i + 1))])]),_c('td',[_c('a',{staticClass:\"u-title\",attrs:{\"href\":`${_vm.root}community/${item.content}`,\"target\":\"_blank\"}},[_c('span',[_vm._v(_vm._s(item.title))])])]),_c('td',[_c('a',{staticClass:\"u-author\",attrs:{\"href\":`${_vm.root}author/${item.user_info.id}`,\"target\":\"_blank\"}},[_c('span',[_vm._v(_vm._s(item.user_info.display_name))])])]),_c('td',[_c('span',{staticClass:\"u-count\"},[_vm._v(_vm._s(item.amount))])]),_c('td',{on:{\"click\":function($event){return _vm.handleVote(item)}}},[_c('div',{staticClass:\"u-vote\"},[_c('img',{attrs:{\"src\":_vm.getImgUrl(`vote/btn-vote.svg`),\"alt\":\"投票\"}})])])])}),0):_vm._e()])])]:_vm._e()],2)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\"序号\")]),_c('th',[_vm._v(\"作品\")]),_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\"作者\")]),_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\"人气\")]),_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\"投票\")])])])\n}]\n\nexport { render, staticRenderFns }","// import axios from 'axios'\nimport { $cms } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getEventAc(id) {\n    return $cms().get(`/api/cms/post/${id}`).then((res) => {\n        return res?.data?.data?.post_content\n    })\n}\n\nexport { getEventAc }\n","<template>\n    <div class=\"jx3story-event-content p-event-main\">\n        <!-- 灯笼 -->\n        <LanternGroup /> \n        <!-- logo -->\n        <router-link class=\"mini-slogan\" to=\"/\" @click.native=\"handleClick\">\n            <img class=\"event__sign\" :src=\"getImgUrl('/eventcontent/eventc__sign.png')\" alt=\"活动标志\" />\n        </router-link>\n\n        <div class=\"m-main\" v-loading=\"loading\">\n            <!-- 活动介绍 -->\n            <template v-if=\"key === 'event'\"> <div class=\"m-content\" v-html=\"content\"></div></template>\n            <!-- 投票 -->\n            <template v-if=\"key === 'vote'\">\n                <div class=\"m-content m-content-vote\">\n                    <h2>2024年茶馆风月录投票榜</h2>\n                    <table class=\"m-vote-table\">\n                        <thead>\n                            <tr>\n                                <th width=\"120px\">序号</th>\n                                <th>作品</th>\n                                <th width=\"120px\">作者</th>\n                                <th width=\"120px\">人气</th>\n                                <th width=\"120px\">投票</th>\n                            </tr>\n                        </thead>\n                        <tbody v-if=\"voteItems && voteItems.length\">\n                            <tr v-for=\"(item, i) in voteItems\" :key=\"i\">\n                                <td>\n                                    <span class=\"u-id\">{{ i + 1 }}</span>\n                                </td>\n                                <td>\n                                    <a :href=\"`${root}community/${item.content}`\" target=\"_blank\" class=\"u-title\">\n                                        <span>{{ item.title }}</span>\n                                    </a>\n                                </td>\n                                <td>\n                                    <a :href=\"`${root}author/${item.user_info.id}`\" target=\"_blank\" class=\"u-author\">\n                                        <span>{{ item.user_info.display_name }}</span>\n                                    </a>\n                                </td>\n                                <td>\n                                    <span class=\"u-count\">{{ item.amount }}</span>\n                                </td>\n                                <td @click=\"handleVote(item)\">\n                                    <div class=\"u-vote\">\n                                        <img :src=\"getImgUrl(`vote/btn-vote.svg`)\" alt=\"投票\" />\n                                    </div>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </template>\n        </div>\n    </div>\n</template>\n\n<script>\nimport LanternGroup from \"./components/LanternGroup.vue\";\nimport { getEventAc } from \"@/service/jx3story\";\nimport { getProgramDetail, userPoll } from \"@/service/vote\";\nimport { __cdn, __Root } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"jx3storyEvent\",\n    inject: [\"__imgRoot\"],\n    components: {\n        LanternGroup,\n    },\n    data() {\n        return {\n            loading: false,\n            // 活动介绍\n            content: \"\",\n            ac_id: 92980,\n\n            // 投票\n            voteItems: [],\n            id: 23,\n            root: __Root,\n        };\n    },\n    computed: {\n        key() {\n            return this.$route.meta.key;\n        },\n    },\n    watch: {\n        key() {\n            this.loadData();\n        },\n    },\n    methods: {\n        getImgUrl(name) {\n            return this.__imgRoot + name;\n        },\n        handleClick() {\n            this.$router.push(\"/\").catch((err) => {\n                if (err.name !== \"NavigationDuplicated\") {\n                    throw err;\n                }\n            });\n        },\n        loadInfo() {\n            getEventAc(this.ac_id)\n                .then((post) => {\n                    this.content = post;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        loadVote() {\n            getProgramDetail(this.id)\n                .then((res) => {\n                    this.voteItems = res.data?.data?.vote_items || [];\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        loadData() {\n            this.loading = true;\n            if (this.key == \"event\") this.loadInfo();\n            if (this.key == \"vote\") this.loadVote();\n        },\n        handleVote({ id }) {\n            userPoll(this.id, { vote_id_list: [id] }).then(() => {\n                this.$message.success(\"投票成功\");\n                this.voteItems = this.voteItems.map((v) => {\n                    if (v.id == id) {\n                        v.amount++;\n                    }\n                    return v;\n                });\n            });\n        },\n    },\n    mounted() {\n        this.loadData();\n    },\n};\n</script>\n<style lang=\"less\">\n@import \"../../assets/css/jx3story/event.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Detail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Detail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=4f8da9d8\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=4f8da9d8&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"lantern-group\"},[_c('Lantern',{attrs:{\"to\":\"/event\",\"top\":68,\"left\":44,\"lanternPath\":\"main/main__lantern1.png\",\"textPath\":\"main/main__texttrans_event.png\",\"alt\":\"灯笼1\",\"textAlt\":\"内容活动\"}}),_c('Lantern',{attrs:{\"to\":\"/article\",\"top\":274,\"left\":136,\"lanternPath\":\"main/main__lantern2.png\",\"textPath\":\"main/main__texttrans_article.png\",\"alt\":\"灯笼2\",\"textAlt\":\"文字赏析\"}}),_c('Lantern',{attrs:{\"to\":\"/vote\",\"top\":440,\"left\":66,\"lanternPath\":\"/main/main__lantern3.png\",\"textPath\":\"/main/main__texttrans_vote.png\",\"alt\":\"灯笼3\",\"textAlt\":\"投票参与\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"lantern-group\">\n        <Lantern\n            to=\"/event\"\n            :top=\"68\"\n            :left=\"44\"\n            lanternPath=\"main/main__lantern1.png\"\n            textPath=\"main/main__texttrans_event.png\"\n            alt=\"灯笼1\"\n            textAlt=\"内容活动\"\n        />\n        <Lantern\n            to=\"/article\"\n            :top=\"274\"\n            :left=\"136\"\n            lanternPath=\"main/main__lantern2.png\"\n            textPath=\"main/main__texttrans_article.png\"\n            alt=\"灯笼2\"\n            textAlt=\"文字赏析\"\n        />\n        <Lantern\n            to=\"/vote\"\n            :top=\"440\"\n            :left=\"66\"\n            lanternPath=\"/main/main__lantern3.png\"\n            textPath=\"/main/main__texttrans_vote.png\"\n            alt=\"灯笼3\"\n            textAlt=\"投票参与\"\n        />\n    </div>\n</template>\n\n<script>\nimport Lantern from \"./Lantern.vue\";\nexport default {\n    name: \"LanternGroup\",\n    components: {\n        Lantern,\n    },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./LanternGroup.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./LanternGroup.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LanternGroup.vue?vue&type=template&id=6c5ee1c3\"\nimport script from \"./LanternGroup.vue?vue&type=script&lang=js\"\nexport * from \"./LanternGroup.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}