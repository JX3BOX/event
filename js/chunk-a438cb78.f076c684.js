(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a438cb78"],{"0822":function(t,s,a){},"22f2":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"events-page"},[s("div",{staticClass:"events-page__header"},[s("img",{staticClass:"events-page__header-title",attrs:{src:t.getImgUrl("title.png"),alt:"剑三年度大事件"}}),s("img",{staticClass:"events-page__header-year",attrs:{src:t.getImgUrl("year.png"),alt:"2024"}})]),s("div",{staticClass:"events-page__content"},[s("div",{staticClass:"events-page__tip"},[t._v(" 踏入江湖，揭秘剑网3十大热门八卦！从深情告白到阵营风云，从副本黑幕到生活琐事，每一条都让你眼界大开。轻松一刻，尽在剑三八卦圈，大侠们，准备好瓜子，一起享受这场游戏界的八卦盛宴吧！ ")]),s("div",{staticClass:"events-page__scroll"},[s("img",{staticClass:"scroll__top",attrs:{src:t.getImgUrl("bg__top.png"),alt:"卷轴上端"}}),s("div",{staticClass:"m-table"},[t._m(0),s("div",{staticClass:"m-table__body"},[t.loading?s("div",{staticClass:"loading-state"},[t._v("加载中...")]):t._l(t.eventList,(function(a,i){return s("a",{key:i,staticClass:"scroll__item",attrs:{href:a.sub_title}},[s("div",{staticClass:"item__rank"},[t._v(t._s(i+1))]),s("div",{staticClass:"item__content"},[s("div",{staticClass:"item__title"},[s("span",{staticClass:"title"},[t._v(t._s(a.title))]),s("span",{staticClass:"tag"},[t._v(t._s(a.tag))])]),s("p",{staticClass:"item__desc"},[t._v(t._s(a.content))])]),s("div",{staticClass:"item__stats"},[a.disabled?s("div",{staticClass:"u-btn u-btn--voted",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[t._v("已投票")]):s("div",{staticClass:"u-btn u-btn--vote",on:{click:function(s){return t.vote(a,s)}}},[t._v("喜欢！吃瓜！")]),s("div",{staticClass:"u-count"},[t._v("人气: "+t._s(a.amount))])])])}))],2)]),s("img",{staticClass:"scroll__bottom",attrs:{src:t.getImgUrl("bg__bottom.png"),alt:"卷轴下端"}})])]),s("div",{staticClass:"events-page__character",class:{visible:t.isInMainContent}},[s("img",{attrs:{src:t.getImgUrl("pin.png"),alt:"吉祥物"}})]),s("div",{staticClass:"events-page__slogan",class:{visible:t.isInMainContent}},[s("img",{staticClass:"bigbang-title",attrs:{src:t.getImgUrl("slogan.png"),alt:"剑三年度大事件2024"}})])])},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"m-table__header"},[s("span",{staticClass:"u-index"},[t._v("名次")]),s("span",{staticClass:"u-event"},[t._v("事件")]),s("span",{staticClass:"u-vote"},[t._v("我喜欢")])])}],n=(a("caad"),a("d3b7"),a("2532"),a("0643"),a("4e3e"),a("159b"),a("2ef0")),o=a.n(n),l=a("41cb");function c(t){return Object(l["b"])().get("/api/next2vote-program/program/".concat(t,"/public"))}function r(t,s){return Object(l["b"])().post("/api/next2/vote-program/program/".concat(t,"/vote"),s)}var v={name:"EventsPage",inject:["__imgRoot"],data:function(){return{event_id:22,eventList:[],loading:!1,userStatus:[],voting:!1,isInMainContent:!1}},methods:{getImgUrl:function(t){return this.__imgRoot+t},showDecoration:function(){var t=this;return o.a.debounce((function(){var s=window.scrollY,a=800;t.isInMainContent=s>a}),100)},loadData:function(){var t=this;return this.loading=!0,c(this.event_id).then((function(s){var a,i,e;t.eventList=(null===(a=s.data.data)||void 0===a?void 0:a.vote_items)||[],t.userStatus=(null===(i=s.data.data)||void 0===i||null===(e=i.latest_vote_history_record)||void 0===e?void 0:e.vote_item_id_list)||[],t.eventList.forEach((function(s){s.disabled=t.userStatus.includes(s.id)}))})).finally((function(){t.loading=!1}))},vote:function(t,s){var a=this;s.stopPropagation(),s.preventDefault(),r(this.event_id,{vote_id_list:[t.id]}).then((function(){a.$message.success("投票成功！"),t.amount+=1,t.disabled=!0}))}},mounted:function(){this.loadData(),window.addEventListener("scroll",this.showDecoration())}},_=v,d=(a("36db"),a("2877")),u=Object(d["a"])(_,i,e,!1,null,null,null);s["default"]=u.exports},"36db":function(t,s,a){"use strict";a("0822")}}]);
//# sourceMappingURL=chunk-a438cb78.f076c684.js.map