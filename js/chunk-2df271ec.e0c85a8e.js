(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2df271ec"],{"04d1":function(t,e,n){"use strict";var i=n("342f"),r=i.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},"0c47":function(t,e,n){"use strict";var i=n("da84"),r=n("d44e");r(i.JSON,"JSON",!0)},"0d76":function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return l}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("14d9"),n("159b"),n("b0c0"),n("131a"),n("1f68"),n("fb6a");var i=n("53ca");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof b?e:b,o=Object.create(r.prototype),s=new S(i||[]);return a(o,"_invoke",{value:j(t,n,s)}),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",v="suspendedYield",g="executing",m="completed",y={};function b(){}function _(){}function w(){}var x={};f(x,c,(function(){return this}));var L=Object.getPrototypeOf,k=L&&L(L(A([])));k&&k!==n&&o.call(k,c)&&(x=k);var C=w.prototype=b.prototype=Object.create(x);function z(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(r,a,s,c){var l=d(t[r],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Object(i["a"])(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var r;a(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}})}function j(e,n,i){var r=p;return function(o,a){if(r===g)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var c=P(s,i);if(c){if(c===y)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var l=d(e,n,i);if("normal"===l.type){if(r=i.done?m:v,l.arg===y)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=m,i.method="throw",i.arg=l.arg)}}}function P(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator["return"]&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Object(i["a"])(e)+" is not iterable")}return _.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},z(O.prototype),f(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new O(h(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},z(C),f(C,u,"Generator"),f(C,c,(function(){return this})),f(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=A,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:A(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,n,i,r,o,a){try{var s=t[o](a),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,c,"next",t)}function c(t){o(a,i,r,s,c,"throw",t)}s(void 0)}))}}var s=n("41cb");function c(t){return Object(s["a"])().get("/api/cms/topic",{params:{type:t,status:1,_no_cache:1}})}function l(t){return u.apply(this,arguments)}function u(){return u=a(r().mark((function t(e){var n;return r().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])().get("/api/cms/breadcrumb/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data.html||"");case 4:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function f(t){return Object(s["a"])().get("/api/cms/user/list/info",{params:t})}},"131a":function(t,e,n){"use strict";var i=n("23e7"),r=n("d2bb");i({target:"Object",stat:!0},{setPrototypeOf:r})},"1f68":function(t,e,n){"use strict";var i=n("83ab"),r=n("edd0"),o=n("861d"),a=n("1787"),s=n("7b0b"),c=n("1d80"),l=Object.getPrototypeOf,u=Object.setPrototypeOf,f=Object.prototype,h="__proto__";if(i&&l&&u&&!(h in f))try{r(f,h,{configurable:!0,get:function(){return l(s(this))},set:function(t){var e=c(this);a(t)&&o(e)&&u(e,t)}})}catch(d){}},"23dc":function(t,e,n){"use strict";var i=n("d44e");i(Math,"Math",!0)},3410:function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),o=n("7b0b"),a=n("e163"),s=n("e177"),c=r((function(){a(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},"4d39":function(t,e,n){"use strict";n("f957")},"4e82":function(t,e,n){"use strict";var i=n("23e7"),r=n("e330"),o=n("59ed"),a=n("7b0b"),s=n("07fa"),c=n("083a"),l=n("577e"),u=n("d039"),f=n("addb"),h=n("a640"),d=n("04d1"),p=n("d998"),v=n("2d00"),g=n("512ce"),m=[],y=r(m.sort),b=r(m.push),_=u((function(){m.sort(void 0)})),w=u((function(){m.sort(null)})),x=h("sort"),L=!u((function(){if(v)return v<70;if(!(d&&d>3)){if(p)return!0;if(g)return g<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)m.push({k:e+i,v:n})}for(m.sort((function(t,e){return e.v-t.v})),i=0;i<m.length;i++)e=m[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),k=_||!w||!x||!L,C=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:l(e)>l(n)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(L)return void 0===t?y(e):y(e,t);var n,i,r=[],l=s(e);for(i=0;i<l;i++)i in e&&b(r,e[i]);f(r,C(t)),n=s(r),i=0;while(i<n)e[i]=r[i++];while(i<l)c(e,i++);return e}})},"512ce":function(t,e,n){"use strict";var i=n("342f"),r=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}},"759a":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("99af");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-event-blindbox"},[e("el-image",{staticClass:"m-bg",attrs:{src:"".concat(t.__imgRoot,"bg.jpg"),fit:"cover"}}),e("div",{staticClass:"p-event-content"},[e("div",{staticClass:"m-content"},[e("div",{staticClass:"m-left"},[e("div",{staticClass:"logo"},[e("img",{attrs:{src:"".concat(t.__imgRoot,"logo.svg"),alt:"魔盒盲盒"}}),e("el-tooltip",{attrs:{effect:"light",placement:"right-start"}},[e("img",{staticClass:"u-info",attrs:{src:"".concat(t.__imgRoot,"desc.svg"),alt:"活动说明"}}),e("div",{staticClass:"m-blindbox-info",attrs:{slot:"content"},slot:"content"},[e("h2",[t._v("活动说明：")]),e("span",[t._v("1.点击盲盒或者右侧开盒按钮可以打开盲盒，每次消耗一定数量的银铛；")]),e("span",[t._v("2.商城奖品请注意查收站内信息；")]),e("span",[t._v("3.实体奖品需要填写收件信息，并在中奖后7个工作日内发货，请耐心等待；")]),e("span",[t._v("4.本活动最终解释权归魔盒团队所有。")])])])],1),e("div",{staticClass:"m-box",class:{active:t.allActive}},[t._l(t.boxList,(function(n,i){return e("div",{key:i,class:["u-box","",{active:n===t.active}],on:{click:function(e){return t.change(n)}}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.showBox(i),expression:"showBox(index)"}],key:t.replay+"box"+i,class:"u-img u-img-".concat(i+1),attrs:{src:"".concat(t.__imgRoot,"box.svg"),alt:"奖品"}})])})),t.isLogin?t._e():e("div",{staticClass:"m-mark",on:{click:t.toLogin}}),e("div",{staticClass:"u-mark",class:{active:t.mark||!t.activeList.length}})],2)]),e("div",{staticClass:"m-right"},[e("div",{staticClass:"m-point"},[t._v(t._s(t.points))]),e("div",{staticClass:"m-prize box"},[e("div",{staticClass:"m-title"},[e("img",{staticClass:"u-prize",attrs:{src:"".concat(t.__imgRoot,"prize.png"),alt:"奖品一览"}})]),e("div",{staticClass:"m-scroll"},[e("div",{ref:"scroll",staticClass:"m-scroll-box"},[t._l(t.prizeList,(function(n,i){return e("a",{key:i,staticClass:"u-item",attrs:{href:t.aLink(n),target:"_blank","data-index":i}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.name,placement:"top"}},[e("img",{attrs:{src:n.img}})])],1)})),t._l(t.prizeList,(function(n,i){return e("a",{key:"v"+i,staticClass:"u-item",attrs:{href:t.aLink(n),target:"_blank","data-index":i}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.name,placement:"top"}},[e("img",{attrs:{src:n.img}})])],1)}))],2)])]),t.draw.length?e("div",{staticClass:"m-lottery"},[t.isLogin?t._e():e("div",{staticClass:"m-mark",on:{click:t.toLogin}}),e("img",{staticClass:"u-img refresh",attrs:{src:"".concat(t.__imgRoot,"refresh.svg"),alt:"刷新盲盒"},on:{click:t.refreshBox}}),e("div",{staticClass:"m-random u-img",class:{disabled:!t.activeList.length||t.points<t.draw[0][1]||t.isDrawing},on:{click:t.openBox}},[e("span",{staticClass:"u-price"},[t._v(" x "+t._s(t.draw[0][0]))])]),e("div",{staticClass:"m-open u-img",class:{disabled:t.activeList.length<10||t.points<t.draw[1][1]||t.isDrawing},on:{click:function(e){return t.openBox("all")}}},[e("span",{staticClass:"u-price u-discount"},[t._v(" x "+t._s(t.draw[1][1]))]),e("span",{staticClass:"u-price"},[t._v(" x "+t._s(10*t.draw[0][1]))])]),e("div",{staticClass:"m-history box u-img",class:t.history?"history":"close"},[e("div",{staticClass:"m-title",on:{click:t.openHistory}},[e("img",{staticClass:"u-history",attrs:{src:"".concat(t.__imgRoot,"history.png"),alt:"开盒记录"}}),e("img",{staticClass:"u-close",attrs:{src:"".concat(t.__imgRoot,"close.png"),width:"42px",alt:"关闭"},on:{click:function(e){return e.stopPropagation(),t.closeHistory.apply(null,arguments)}}})]),t.isLogin?t._e():e("div",{staticClass:"m-mark",on:{click:t.toLogin}}),e("History",{attrs:{id:t.ID,show:t.history},on:{update:t.showPrizes}})],1)]):t._e()])])]),e("div",{staticClass:"m-goods",class:{active:t.hasPrize}},[e("div",{staticClass:"m-item"},t._l(t.myPrizes,(function(n,i){return e("div",{key:i,staticClass:"u-item box"},["vip_asset"==n.prize_type?[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"points.png")}}),e("span",[t._v(t._s(n.vip_asset_once_give+t.asset[n.vip_asset_type]))])]:t._e(),"thanks"==n.prize_type?[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"thanks.png")}}),e("span",[t._v("感谢参与")])]:t._e(),"mall_goods"==n.prize_type?[e("img",{staticClass:"u-img",attrs:{src:n.goods.goods_images[0]}}),e("span",[t._v(t._s(n.goods.title))])]:t._e()],2)})),0),e("img",{staticClass:"u-get",class:{disabled:null!==t.prizesInterval},attrs:{src:"".concat(t.__imgRoot).concat(t.history?"ok":"get",".png"),alt:"拿下"},on:{click:t.closePrize}})])],1)},r=[],o=(n("d81d"),n("cb29"),n("d3b7"),n("159b"),n("14d9"),n("caad"),n("2532"),n("4de4"),n("4e82"),n("c9d2")),a=n("0d76"),s=n("41cb");function c(t){return Object(s["c"])().get("/api/lucky-draw/my/history",{params:t})}function l(t){return Object(s["c"])().get("/api/lucky-draw/my/history/".concat(t,"/details"))}function u(t){return Object(s["c"])().get("/api/lucky-draw/public/details",{params:{id:t}})}function f(t,e){return Object(s["c"])().post("/api/lucky-draw/public/item/".concat(t,"/try-my-lucky?batch=").concat(e))}var h=n("2ef0"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-history-content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table-box",attrs:{data:t.list,align:"left"}},[e("el-table-column",{attrs:{prop:"created_at",label:"抽奖时间"}}),e("el-table-column",{attrs:{prop:"chance_count",width:"140px",label:"抽奖次数"}}),e("el-table-column",{attrs:{label:"状态",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-tag",{attrs:{type:2==n.row.status?"success":"info"}},[t._v(" "+t._s(2==n.row.status?"中奖":"未中奖")+" ")])]}}])}),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(n){return[2==n.row.status?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.look(n.row.id)}}},[t._v(" 查看详情 ")]):t._e()]}}])})],1),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,"page-size":t.pageSize,total:t.total,"current-page":t.index},on:{"update:currentPage":function(e){t.index=e},"update:current-page":function(e){t.index=e},"current-change":t.change}})],1)},p=[],v={name:"History",inject:["__imgRoot"],props:["id","show"],data:function(){return{list:[],index:0,pageSize:7,total:0,loading:!1}},watch:{show:{immediate:!0,handler:function(t){t&&this.load(this.id)}}},methods:{load:function(t){var e=this;this.loading=!0;var n={luckyDrawId:t,pageSize:this.pageSize,index:this.index};c(n).then((function(t){e.list=t.data.data.list,e.total=t.data.data.page.total})).finally((function(){e.loading=!1}))},look:function(t){this.$emit("update",t)},change:function(t){this.index=t,this.load(this.id)}}},g=v,m=(n("4d39"),n("2877")),y=Object(m["a"])(g,d,p,!1,null,null,null),b=y.exports,_=n("65c2"),w="blindboxID",x=[2,3],L={name:"Index",inject:["__imgRoot"],data:function(){return{raw:{},ID:0,draw:{},prizeList:[],points:0,index:0,active:"",allActive:!1,boxList:new Array(10).fill(1).map((function(t,e){return e+1})),activeList:[],replay:0,historyList:[],status:{0:"全部",1:"抽奖中",2:"中奖",3:"未中奖"},asset:{boxcoin:"盒币（重制）",boxcoin_origin:"盒币（缘起）",point:"积分"},mark:!1,history:!1,close:!1,hasPrize:!1,myPrizes:[],scrollInterval:null,prizesInterval:null,isDrawing:!1}},components:{History:b},computed:{data:function(){var t={};return this.raw.forEach((function(e){t[e.subtype]||(t[e.subtype]=[]),t[e.subtype].push(e)})),t},isLogin:function(){return o["a"].isLogin()},optionLeft:function(){return{step:.8,direction:2,hoverStop:!0,openTouch:!1}}},watch:{isLogin:{immediate:!0,handler:function(t){t&&this.myPoints()}}},mounted:function(){this.init()},methods:{init:function(){var t=this;Object(a["a"])(w).then((function(e){t.ID=e,t.ID&&u(t.ID).then((function(e){var n=e.data.data,i={point:"".concat(t.__imgRoot,"points.png"),boxcoin:"".concat(t.__imgRoot,"boxcoin.png")};t.draw=Object(h["zip"])(n.allow_once_try_count,n.allow_once_try_count_cost_points),t.prizeList=n.prize.map((function(t){return"mall_goods"!=t.prize_type&&i[t.vip_asset_type]?{img:i[t.vip_asset_type],name:"银铛（积分）"}:{id:t.mall_goods.id,img:t.mall_goods.goods_images[0],name:t.mall_goods.title}})),t.scroll(t.prizeList.length);var r=n.user_level_limit,a=o["a"].getLevel(1);r>a&&t.$alert("很抱歉，您的用户等级不足","无法进行当前活动",{type:"error"}),t.refreshBox()}))}))},toLogin:function(){this.$confirm("参与抽奖必须登录, 是否登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].toLogin()}))},showBox:function(t){return this.activeList.includes(t+1)},aLink:function(t){var e=t.id;return e?_["__Root"]+"vip/mall/"+e:""},myPoints:function(){var t=this;o["a"].getAsset().then((function(e){t.points=(null===e||void 0===e?void 0:e.points)||0}))},scroll:function(t){var e="\n            @keyframes scroll_prize {\n                0% {\n                    transform: translateX(0);\n                }\n                100% {\n                    transform: translateX(-".concat(148*t,"px);\n                }\n            }"),n=document.createElement("style");n.setAttribute("type","text/css"),document.head.appendChild(n),n.sheet.insertRule(e),this.$refs.scroll.style.animation="scroll_prize ".concat(148*t/50,"s linear infinite")},refreshBox:function(){this.allActive=!1,this.activeList=Object(h["cloneDeep"])(this.boxList),this.replay++},openBox:Object(h["throttle"])((function(t){var e=this;if("all"===t)this.allActive=!0,setTimeout((function(){e.activeList=[],e.allActive=!1}),1600),this.hasLucky();else{var n=this.activeList[Math.floor(Math.random()*this.activeList.length)];this.change(n)}}),3e3),change:function(t){var e=this;this.active=t,this.mark=!0,setTimeout((function(){e.activeList=e.activeList.filter((function(e){return e!==t})),e.mark=!1,e.active=""}),1600),this.hasLucky()},hasLucky:function(){var t=this,e=1;this.allActive&&(e=10),this.isDrawing=!0,f(this.ID,e).then((function(e){var n,i=null===(n=e.data)||void 0===n?void 0:n.data.id;t.showPrizes(i,!0),t.myPoints()}))},showPrizes:function(t,e){var n=this;if(t){var i=0,r=function(){l(t).then((function(t){var r;if(i>5)return clearInterval(n.prizesInterval),n.prizesInterval=null,n.$alert("请前往开盒记录查看，如无结果请联系网站管理人员","开盒出现异常",{type:"error"});if(-1!==x.indexOf(null===(r=t.data)||void 0===r?void 0:r.data.status)){var o;if(n.myPrizes=(null===(o=t.data)||void 0===o?void 0:o.data.prizes)||[],e){var a,s,c,l,u=(null===(a=t.data)||void 0===a||null===(s=a.data)||void 0===s||null===(c=s.prizes)||void 0===c?void 0:c.length)||0,f=(null===(l=t.data)||void 0===l?void 0:l.data.chance_count)-u,h=new Array(f).fill({prize_type:"thanks"});n.myPrizes=n.myPrizes.concat(h),n.myPrizes.sort((function(){return.5-Math.random()}))}n.hasPrize=!0,clearInterval(n.prizesInterval),n.prizesInterval=null}else i++}))};e?this.prizesInterval=setInterval(r,1e3):r()}},closePrize:function(){this.hasPrize=!1,this.isDrawing=!1,this.activeList.length||this.refreshBox(),this.myPrizes=[]},openHistory:function(){this.history=!0},closeHistory:function(){this.history=!1}},destroyed:function(){clearInterval(this.scrollInterval)}},k=L,C=(n("eba2"),Object(m["a"])(k,i,r,!1,null,null,null));e["default"]=C.exports},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),r=n("23cb"),o=n("07fa");t.exports=function(t){var e=i(this),n=o(e),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);while(l>s)e[s++]=t;return e}},8678:function(t,e,n){},"944a":function(t,e,n){"use strict";var i=n("d066"),r=n("e065"),o=n("d44e");r("toStringTag"),o(i("Symbol"),"Symbol")},b636:function(t,e,n){"use strict";var i=n("e065");i("asyncIterator")},cb29:function(t,e,n){"use strict";var i=n("23e7"),r=n("81d5"),o=n("44d2");i({target:"Array",proto:!0},{fill:r}),o("fill")},d998:function(t,e,n){"use strict";var i=n("342f");t.exports=/MSIE|Trident/.test(i)},eba2:function(t,e,n){"use strict";n("8678")},f957:function(t,e,n){}}]);
//# sourceMappingURL=chunk-2df271ec.e0c85a8e.js.map