(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c256148"],{3115:function(t,n,e){"use strict";e("3ec5")},3376:function(t,n,e){"use strict";e("6f55")},"3ec5":function(t,n,e){},"6f55":function(t,n,e){},9325:function(t,n,e){"use strict";var a=function(){var t=this,n=t._self._c;return n("router-link",{staticClass:"lantern",style:t.positionStyle,attrs:{to:t.to}},[n("img",{staticClass:"lantern__image",attrs:{src:t.lanternImage,alt:t.alt}}),n("img",{staticClass:"lantern__text",attrs:{src:t.textImage,alt:t.textAlt}})])},i=[],o=(e("a9e3"),{name:"Lantern",inject:["__imgRoot"],props:{to:{type:String,required:!0},top:{type:[Number,String],required:!0},left:{type:[Number,String],required:!0},lanternPath:{type:String,required:!0},textPath:{type:String,required:!0},alt:{type:String,default:"灯笼"},textAlt:{type:String,default:"文字"}},computed:{positionStyle:function(){return{top:"number"===typeof this.top?"".concat(this.top,"px"):this.top,left:"number"===typeof this.left?"".concat(this.left,"px"):this.left}},lanternImage:function(){return this.__imgRoot+this.lanternPath},textImage:function(){return this.__imgRoot+this.textPath}}}),r=o,s=(e("3376"),e("2877")),c=Object(s["a"])(r,a,i,!1,null,null,null);n["a"]=c.exports},a6b4:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return r})),e.d(n,"d",(function(){return s}));e("99af");var a=e("41cb");function i(t){return Object(a["b"])().get("/api/next2/vote-program/program/".concat(t,"/public"))}function o(t,n){return Object(a["a"])().get("/api/cms/vote/program/item/".concat(t,"/qrcode"),{params:n})}function r(){return Object(a["a"])().get("/api/cms/manage/www/block/load",{params:{slug:"mid_autumn_2024",app:"std"}}).then((function(t){return t.data.data.items}))}function s(t,n){return Object(a["b"])().post("/api/next2/vote-program/program/".concat(t,"/vote"),n)}},c88f:function(t,n,e){"use strict";e.r(n);e("99af");var a=function(){var t=this,n=t._self._c;return n("div",{staticClass:"jx3story-event-content p-event-main"},[n("LanternGroup"),n("router-link",{staticClass:"mini-slogan",attrs:{to:"/"},nativeOn:{click:function(n){return t.handleClick.apply(null,arguments)}}},[n("img",{staticClass:"event__sign",attrs:{src:t.getImgUrl("/eventcontent/eventc__sign.png"),alt:"活动标志"}})]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-main"},["event"===t.key?[n("div",{staticClass:"m-content",domProps:{innerHTML:t._s(t.content)}})]:t._e(),"vote"===t.key?[n("div",{staticClass:"m-content m-content-vote"},[n("h2",[t._v("2024年茶馆风月录投票榜")]),n("table",{staticClass:"m-vote-table"},[t._m(0),t.voteItems&&t.voteItems.length?n("tbody",t._l(t.voteItems,(function(e,a){return n("tr",{key:a},[n("td",[n("span",{staticClass:"u-id"},[t._v(t._s(a+1))])]),n("td",[n("a",{staticClass:"u-title",attrs:{href:"".concat(t.root,"community/").concat(e.content),target:"_blank"}},[n("span",[t._v(t._s(e.title))])])]),n("td",[n("a",{staticClass:"u-author",attrs:{href:"".concat(t.root,"author/").concat(e.user_info.id),target:"_blank"}},[n("span",[t._v(t._s(e.user_info.display_name))])])]),n("td",[n("span",{staticClass:"u-count"},[t._v(t._s(e.amount))])]),n("td",{on:{click:function(n){return t.handleVote(e)}}},[n("div",{staticClass:"u-vote"},[n("img",{attrs:{src:t.getImgUrl("vote/btn-vote.svg"),alt:"投票"}})])])])})),0):t._e()])])]:t._e()],2)],1)},i=[function(){var t=this,n=t._self._c;return n("thead",[n("tr",[n("th",{attrs:{width:"120px"}},[t._v("序号")]),n("th",[t._v("作品")]),n("th",{attrs:{width:"120px"}},[t._v("作者")]),n("th",{attrs:{width:"120px"}},[t._v("人气")]),n("th",{attrs:{width:"120px"}},[t._v("投票")])])])}],o=(e("d81d"),e("14d9"),e("b0c0"),e("d3b7"),e("a573"),e("ff7f")),r=e("41cb");function s(t){return Object(r["a"])().get("/api/cms/post/".concat(t)).then((function(t){var n,e;return null===t||void 0===t||null===(n=t.data)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.post_content}))}var c=e("a6b4"),l=e("65c2"),u={name:"jx3storyEvent",inject:["__imgRoot"],components:{LanternGroup:o["a"]},data:function(){return{loading:!1,content:"",ac_id:92980,voteItems:[],id:23,root:l["__Root"]}},computed:{key:function(){return this.$route.meta.key}},watch:{key:function(){this.loadData()}},methods:{getImgUrl:function(t){return this.__imgRoot+t},handleClick:function(){this.$router.push("/").catch((function(t){if("NavigationDuplicated"!==t.name)throw t}))},loadInfo:function(){var t=this;s(this.ac_id).then((function(n){t.content=n})).finally((function(){t.loading=!1}))},loadVote:function(){var t=this;Object(c["a"])(this.id).then((function(n){var e,a;t.voteItems=(null===(e=n.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.vote_items)||[]})).finally((function(){t.loading=!1}))},loadData:function(){this.loading=!0,"event"==this.key&&this.loadInfo(),"vote"==this.key&&this.loadVote()},handleVote:function(t){var n=this,e=t.id;Object(c["d"])(this.id,{vote_id_list:[e]}).then((function(){n.$message.success("投票成功"),n.voteItems=n.voteItems.map((function(t){return t.id==e&&t.amount++,t}))}))}},mounted:function(){this.loadData()}},d=u,m=(e("3115"),e("2877")),f=Object(m["a"])(d,a,i,!1,null,null,null);n["default"]=f.exports},ff7f:function(t,n,e){"use strict";var a=function(){var t=this,n=t._self._c;return n("div",{staticClass:"lantern-group"},[n("Lantern",{attrs:{to:"/event",top:68,left:44,lanternPath:"main/main__lantern1.png",textPath:"main/main__texttrans_event.png",alt:"灯笼1",textAlt:"内容活动"}}),n("Lantern",{attrs:{to:"/article",top:274,left:136,lanternPath:"main/main__lantern2.png",textPath:"main/main__texttrans_article.png",alt:"灯笼2",textAlt:"文字赏析"}}),n("Lantern",{attrs:{to:"/vote",top:440,left:66,lanternPath:"/main/main__lantern3.png",textPath:"/main/main__texttrans_vote.png",alt:"灯笼3",textAlt:"投票参与"}})],1)},i=[],o=e("9325"),r={name:"LanternGroup",components:{Lantern:o["a"]}},s=r,c=e("2877"),l=Object(c["a"])(s,a,i,!1,null,null,null);n["a"]=l.exports}}]);
//# sourceMappingURL=chunk-4c256148.96f2bd8c.js.map