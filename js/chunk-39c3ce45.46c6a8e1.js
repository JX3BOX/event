(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39c3ce45"],{"498a":function(t,a,s){"use strict";var e=s("23e7"),n=s("58a8").trim,i=s("c8d2");e({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},6938:function(t,a,s){"use strict";s("8732")},8732:function(t,a,s){},"955d":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"p-event-content"},[a("div",{staticClass:"m-top"}),a("Content"),a("div",{staticClass:"m-bottom"},[a("img",{staticClass:"m-man",attrs:{src:t.__imgRoot+"man.png"}}),a("img",{staticClass:"m-woman",attrs:{src:t.__imgRoot+"woman.png"}})])],1)},n=[],i=(s("b0c0"),s("ac1f"),s("841c"),s("498a"),s("9911"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-content"},[a("div",{staticClass:"m-user-info"},[a("div",{staticClass:"m-name"},[t.isLogin?[a("img",{staticClass:"u-img",attrs:{src:t.userInfo.avatar}}),a("span",{staticClass:"u-name"},[t._v(t._s(t.userInfo.name))])]:t._e()],2),a("div",{staticClass:"m-button"},[a("a",{staticClass:"u-btn u-register",attrs:{href:t.register_link,target:"_blank"}},[t._v("注册铭牌")]),a("span",{staticClass:"u-btn u-mine",on:{click:t.changeList}},[t._v(t._s(t.isMyList?"全部铭牌":"我的铭牌")+" ")])])]),a("div",{staticClass:"m-namespace"},[a("div",{staticClass:"m-tool"},[a("span",{staticClass:"u-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"m-search"},[a("div",{staticClass:"m-tabs"},t._l(t.tabs,(function(s,e){return a("span",{key:e,class:[{active:t.type==s.value},"u-tab"],on:{click:function(a){return t.change(s.value)}}},[t._v(t._s(s.label))])})),0),a("div",{key:"namespace-search",staticClass:"u-search",attrs:{slot:"search-before"},slot:"search-before"},[a("el-input",{staticClass:"u-input",attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.onSearch},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.search,callback:function(a){t.search="string"===typeof a?a.trim():a},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.onSearch},slot:"append"})],1)],1)])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-list"},[t.list.length?t._l(t.list,(function(s,e){return a("a",{key:e,staticClass:"m-item",attrs:{target:"_blank",href:s.link}},[a("div",{staticClass:"m-title"},[a("div",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[t._v(t._s(s.key))])]),a("span",{staticClass:"u-tag"},[t._v("剑网3.com/"+t._s(s.key))])]),a("span",{staticClass:"u-desc"},[t._v(t._s(s.desc))]),a("div",{staticClass:"m-info"},[a("span",[a("i",{staticClass:"el-icon-user"}),t._v(t._s(s.user.display_name))]),a("span",[a("i",{staticClass:"el-icon-date"}),t._v(t._s(t.dataFormat(s.created)))])])])})):a("span",{staticClass:"m-item m-no-item"},[t._v(" 暂无对应铭牌 ")])],2),a("div",{staticClass:"m-namespace-pages"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a}}})],1)])])}),c=[],r=(s("d3b7"),s("d81d"),s("159b"),s("b64b"),s("41cb"));function l(t){return Object(r["a"])().get("/api/cms/namespace",{params:t})}function o(t){return Object(r["b"])()({method:"GET",url:"/api/my/namespaces",params:t})}var u=s("85e4"),p=s("c9d2"),d=s("e4f1"),m=(s("65c2"),{name:"Content",data:function(){return{type:"all",tabs:[{label:"全部",value:"all"},{label:"玩家",value:"player"},{label:"团队",value:"team"},{label:"系统",value:"system"},{label:"自定义",value:"custom"}],list:"",per:8,total:1,page:1,search:"",query:"",loading:!1,isLogin:p["a"].isLogin(),userInfo:p["a"].getInfo(),isMyList:!1}},computed:{register_link:function(){return Object(u["publishLink"])("namespace")},params:function(){var t={source_type:"all"==this.type?"":this.type,page:this.page,per:this.per,status:1};return t},title:function(){return this.isMyList?"我的铭牌":"铭牌大厅"}},watch:{type:function(){this.page=1},params:{deep:!0,immediate:!0,handler:function(t){this.query="",this.isMyList?this.loadMyData():this.loadData()}}},methods:{change:function(t){this.type=t},loadData:function(){var t=this;this.loading=!0;var a=this.removeEmpty(Object.assign({},this.params,{key:this.search}));l(a).then((function(a){t.list=a.data.data.list||[],t.total=a.data.data.total})).finally((function(){t.loading=!1}))},loadMyData:function(){var t=this;this.loading=!0;var a=this.removeEmpty(Object.assign({},this.params,{key:this.search}));o(a).then((function(a){var s=a.data.data.data||[];t.list=s.map((function(t){return t.user.display_name=t.user.nickname,t})),t.total=a.data.data.total})).finally((function(){t.loading=!1}))},removeEmpty:function(t){return Object.keys(t).forEach((function(a){null!==t[a]&&void 0!==t[a]&&""!==t[a]||delete t[a]})),t},onSearch:function(){if(1!=this.page)return this.page=1;this.loadData()},dataFormat:function(t){return t&&Object(d["a"])(1e3*~~t)||"-"},changeList:function(){this.isLogin&&(this.isMyList=!this.isMyList,this.isMyList?this.loadMyData():this.loadData())}},created:function(){this.query=this.$route.query.namespace}}),h=m,f=(s("6938"),s("2877")),v=Object(f["a"])(h,i,c,!1,null,null,null),g=v.exports,y={name:"Index",inject:["__imgRoot"],components:{Content:g},data:function(){return{}},computed:{}},b=y,_=Object(f["a"])(b,e,n,!1,null,null,null);a["default"]=_.exports},c8d2:function(t,a,s){var e=s("5e77").PROPER,n=s("d039"),i=s("5899"),c="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||c[t]()!==c||e&&i[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-39c3ce45.46c6a8e1.js.map