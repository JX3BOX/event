{"version":3,"sources":["webpack:///./src/service/topic.js","webpack:///./src/pages/blindbox/Index.vue","webpack:///./src/service/pay.js","webpack:///src/pages/blindbox/Index.vue","webpack:///./src/pages/blindbox/Index.vue?a447","webpack:///./src/pages/blindbox/Index.vue?a8d6","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./src/pages/blindbox/Index.vue?57cf","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["getTopic","topic","$cms","mute","get","params","type","all","status","render","_vm","this","_c","_self","staticClass","isLogin","_e","on","toLogin","attrs","concat","__imgRoot","class","active","allActive","_l","boxList","number","index","key","$event","change","directives","name","rawName","value","showBox","expression","replay","_v","_s","points","ref","style","animationDuration","prizeList","item","onLoadPrizeList","refreshBox","openBox","history","close","openHistory","closeHistory","show_goods","staticRenderFns","getBlindBox","id","$pay","goodLucky","data","post","KEY","inject","ID","Array","fill","map","activeList","open","computed","_data","raw","forEach","subtype","push","User","watch","immediate","handler","val","_this","getAsset","then","res","mounted","init","methods","_this2","title","asset","point","boxcoin","prize","prize_type","vip_asset_type","mall_goods","goods_images","includes","cloneDeep","$refs","scrollBlock","offsetWidth","_this3","setTimeout","filter","_this4","Math","floor","random","length","$confirm","confirmButtonText","cancelButtonText","hasLucky","batch","console","log","component","toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","O","argumentsLength","arguments","undefined","end","endPos","$","addToUnscopables","target","proto"],"mappings":"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","file":"js/chunk-34e5a81c.fca4ad04.js","sourcesContent":["import { $cms } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getTopic(topic) {\n    return $cms({ mute: true }).get(\"/api/cms/topic\", {\n        params: {\n            type: topic,\n            all: 1,\n            status: 1,\n        },\n    });\n}\n\nexport { getTopic };","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"p-event-blindbox\"},[(!_vm.isLogin)?_c('div',{staticClass:\"m-mark\",on:{\"click\":_vm.toLogin}}):_vm._e(),_c('el-image',{staticClass:\"m-bg\",attrs:{\"src\":`${_vm.__imgRoot}bg.png`,\"fit\":\"cover\"}}),_c('div',{staticClass:\"p-event-content\"},[_c('div',{staticClass:\"m-content\"},[_c('div',{staticClass:\"m-left\"},[_c('div',{staticClass:\"logo\"},[_c('img',{attrs:{\"src\":`${_vm.__imgRoot}logo.png`,\"alt\":\"魔盒盲盒\"}})]),_c('div',{staticClass:\"m-box\",class:{ active: _vm.allActive }},[_vm._l((_vm.boxList),function(number,index){return _c('div',{key:index,class:['u-box', '', { active: number === _vm.active }],on:{\"click\":function($event){return _vm.change(number)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showBox(index)),expression:\"showBox(index)\"}],key:_vm.replay + 'box' + index,class:`u-img u-img-${index + 1}`,attrs:{\"src\":`${_vm.__imgRoot}box.png`,\"alt\":\"奖品\"}})])}),_c('div',{class:['u-mark', { active: _vm.active }]})],2)]),_c('div',{staticClass:\"m-right\"},[_c('div',{staticClass:\"m-point\"},[_vm._v(_vm._s(_vm.points))]),_c('div',{staticClass:\"m-prize box\"},[_c('div',{staticClass:\"m-title\"},[_c('img',{attrs:{\"src\":`${_vm.__imgRoot}prize.png`,\"alt\":\"奖品一览\"}})]),_c('div',{staticClass:\"m-item\"},[_c('div',{ref:\"scrollBlock\",staticClass:\"m-scroll-block\",style:({ animationDuration: _vm.animationDuration })},[_vm._l((_vm.prizeList),function(item,index){return _c('img',{key:`prize${index}`,attrs:{\"src\":item},on:{\"load\":_vm.onLoadPrizeList}})}),_vm._l((_vm.prizeList),function(item,index){return _c('img',{key:`prize_end${index}`,attrs:{\"src\":item},on:{\"load\":_vm.onLoadPrizeList}})})],2)])]),_c('div',{staticClass:\"m-lottery\"},[_c('img',{staticClass:\"u-img refresh\",attrs:{\"src\":`${_vm.__imgRoot}refresh.png`,\"alt\":\"刷新盲盒\"},on:{\"click\":_vm.refreshBox}}),_c('img',{staticClass:\"u-img random\",attrs:{\"src\":`${_vm.__imgRoot}random.png`,\"alt\":\"随机开盒\"},on:{\"click\":_vm.openBox}}),_c('img',{staticClass:\"u-img open\",attrs:{\"src\":`${_vm.__imgRoot}open.png`,\"alt\":\"十连开盒\"},on:{\"click\":function($event){return _vm.openBox('all')}}}),_c('div',{staticClass:\"m-history box u-img\",class:{ history: _vm.history, close: _vm.close }},[_c('div',{staticClass:\"m-title\"},[_c('img',{attrs:{\"src\":`${_vm.__imgRoot}history.png`,\"alt\":\"开盒记录\"},on:{\"click\":_vm.openHistory}}),_c('img',{staticClass:\"u-close\",attrs:{\"src\":`${_vm.__imgRoot}close.png`,\"alt\":\"关闭\"},on:{\"click\":_vm.closeHistory}})]),_c('div',{staticClass:\"m-history-content\"})])])])])]),_c('div',{staticClass:\"m-goods\",class:{ active: _vm.show_goods }},[_c('div',{staticClass:\"m-item\"},_vm._l((10),function(item){return _c('div',{key:item,staticClass:\"u-item box\"})}),0),_c('img',{staticClass:\"u-get\",attrs:{\"src\":`${_vm.__imgRoot}get.png`,\"alt\":\"拿下\"},on:{\"click\":function($event){_vm.show_goods = false}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $pay } from \"@jx3box/jx3box-common/js/https\";\n\n\n// 获取中奖历史\nfunction getMyHistory(params) {\n    return $pay().get(`/lucky-draw/my/history`, { params });\n}\n\n// 所有抽奖列表\nfunction getLuckyList(params) {\n    return $pay().get(`/lucky-draw/public/list`, { params });\n}\n\n// 获取活动详情\nfunction getBlindBox(id) {\n    return $pay().get(`/lucky-draw/public/details`, { params:{id} });\n}\n\n// 抽奖\nfunction goodLucky(id, data) {\n    return $pay().post(`/lucky-draw/public/item/${id}/try-my-lucky`, data);\n}\n\n\nexport {\n    getMyHistory,\n    getBlindBox,\n    goodLucky,\n    getLuckyList\n};","<template>\n    <div class=\"p-event-blindbox\">\n        <!-- 判断是否登录，没有登录跳转登录 -->\n        <div class=\"m-mark\" @click=\"toLogin\" v-if=\"!isLogin\"></div>\n        <!-- 模糊背景 -->\n        <el-image :src=\"`${__imgRoot}bg.png`\" class=\"m-bg\" fit=\"cover\" />\n        <!-- 内容 -->\n        <div class=\"p-event-content\">\n            <div class=\"m-content\">\n                <!-- 左侧 -->\n                <div class=\"m-left\">\n                    <div class=\"logo\">\n                        <img :src=\"`${__imgRoot}logo.png`\" alt=\"魔盒盲盒\" />\n                    </div>\n                    <!-- 抽奖盒子 -->\n                    <div class=\"m-box\" :class=\"{ active: allActive }\">\n                        <div\n                            :class=\"['u-box', '', { active: number === active }]\"\n                            v-for=\"(number, index) in boxList\"\n                            :key=\"index\"\n                            @click=\"change(number)\"\n                        >\n                            <img\n                                :class=\"`u-img u-img-${index + 1}`\"\n                                :src=\"`${__imgRoot}box.png`\"\n                                alt=\"奖品\"\n                                :key=\"replay + 'box' + index\"\n                                v-show=\"showBox(index)\"\n                            />\n                        </div>\n                        <div :class=\"['u-mark', { active }]\"></div>\n                    </div>\n                </div>\n                <!-- 右侧 -->\n                <div class=\"m-right\">\n                    <!-- 积分现实 -->\n                    <div class=\"m-point\">{{ points }}</div>\n                    <!-- 奖品轮播 -->\n                    <div class=\"m-prize box\">\n                        <div class=\"m-title\">\n                            <img :src=\"`${__imgRoot}prize.png`\" alt=\"奖品一览\" />\n                        </div>\n                        <div class=\"m-item\">\n                            <div class=\"m-scroll-block\" ref=\"scrollBlock\" :style=\"{ animationDuration }\">\n                                <img\n                                    v-for=\"(item, index) in prizeList\"\n                                    :key=\"`prize${index}`\"\n                                    @load=\"onLoadPrizeList\"\n                                    :src=\"item\"\n                                />\n                                <img\n                                    v-for=\"(item, index) in prizeList\"\n                                    :key=\"`prize_end${index}`\"\n                                    @load=\"onLoadPrizeList\"\n                                    :src=\"item\"\n                                />\n                                <!--跑马灯效果需要展示两份图片以首尾衔接-->\n                            </div>\n                        </div>\n                    </div>\n                    <!-- 抽奖按钮 -->\n                    <div class=\"m-lottery\">\n                        <img\n                            :src=\"`${__imgRoot}refresh.png`\"\n                            class=\"u-img refresh\"\n                            @click=\"refreshBox\"\n                            alt=\"刷新盲盒\"\n                        />\n                        <img :src=\"`${__imgRoot}random.png`\" class=\"u-img random\" alt=\"随机开盒\" @click=\"openBox\" />\n                        <img :src=\"`${__imgRoot}open.png`\" class=\"u-img open\" alt=\"十连开盒\" @click=\"openBox('all')\" />\n                        <div class=\"m-history box u-img\" :class=\"{ history, close }\">\n                            <div class=\"m-title\">\n                                <img :src=\"`${__imgRoot}history.png`\" alt=\"开盒记录\" @click=\"openHistory\" />\n                                <img :src=\"`${__imgRoot}close.png`\" class=\"u-close\" alt=\"关闭\" @click=\"closeHistory\" />\n                            </div>\n                            <div class=\"m-history-content\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"m-goods\" :class=\"{ active: show_goods }\">\n            <div class=\"m-item\">\n                <div class=\"u-item box\" v-for=\"item in 10\" :key=\"item\"></div>\n            </div>\n            <img :src=\"`${__imgRoot}get.png`\" class=\"u-get\" alt=\"拿下\" @click=\"show_goods = false\" />\n        </div>\n    </div>\n</template>\n\n<script>\nconst KEY = \"blindbox\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getTopic } from \"@/service/topic\";\nimport { getBlindBox, goodLucky } from \"@/service/pay\";\nimport { cloneDeep } from \"lodash\";\nexport default {\n    name: \"Index\",\n    inject: [\"__imgRoot\"],\n    data: function () {\n        return {\n            ID: 0,\n            prizeList: [],\n            points: 0,\n            index: 0,\n\n            animationDuration: \"0s\",\n            active: \"\",\n            allActive: false,\n            boxList: new Array(10).fill(1).map((item, index) => index + 1),\n            activeList: [],\n            replay: 0,\n\n            history: false,\n            close: false,\n            open: false,\n            show_goods: false,\n        };\n    },\n    computed: {\n        data: function () {\n            let _data = {};\n            this.raw.forEach((item) => {\n                if (!_data[item.subtype]) _data[item.subtype] = [];\n                _data[item.subtype].push(item);\n            });\n            return _data;\n        },\n        isLogin() {\n            return User.isLogin();\n        },\n    },\n    watch: {\n        isLogin: {\n            immediate: true,\n            handler: function (val) {\n                val &&\n                    User.getAsset().then((res) => {\n                        this.points = res?.points || 0;\n                    });\n            },\n        },\n    },\n    mounted() {\n        this.init();\n    },\n    methods: {\n        // 初始化，获取活动ID,并获取活动详情\n        init() {\n            getTopic(KEY).then((res) => {\n                this.raw = res.data.data;\n                this.ID = ~~this.data.ID[0].title;\n                this.ID &&\n                    getBlindBox(this.ID).then((res) => {\n                        const data = res.data.data;\n                        const asset = {\n                            point: `${this.__imgRoot}points.png`,\n                            boxcoin: `${this.__imgRoot}boxcoin.png`,\n                        };\n                        this.prizeList = data.prize.map((item) => {\n                            if (item.prize_type != \"mall_goods\" && asset[item.vip_asset_type])\n                                return asset[item.vip_asset_type];\n                            return item.mall_goods.goods_images[0];\n                        });\n                        this.refreshBox();\n                    });\n            });\n        },\n        showBox(index) {\n            return this.activeList.includes(index + 1);\n        },\n        // 刷新box\n        refreshBox() {\n            this.allActive = false;\n            this.activeList = cloneDeep(this.boxList);\n            this.replay++;\n        },\n        onLoadPrizeList() {\n            // 根据给的奖品参数计算动画时间两份图只滚动一份，所以/100再/2\n            this.animationDuration = `${this.$refs.scrollBlock.offsetWidth / 60}s`;\n        },\n        change(number) {\n            this.active = number;\n            setTimeout(() => {\n                this.activeList = this.activeList.filter((item) => item !== number);\n                this.show_goods = true;\n            }, 1800);\n        },\n        openHistory() {\n            this.history = true;\n            this.close = false;\n        },\n        closeHistory() {\n            this.history = false;\n            this.close = true;\n        },\n        openBox(key) {\n            if (key === \"all\") {\n                this.allActive = true;\n                setTimeout(() => {\n                    this.activeList = [];\n                }, 1800);\n            } else {\n                const number = this.activeList[Math.floor(Math.random() * this.activeList.length)];\n                this.change(number);\n            }\n        },\n        toLogin() {\n            this.$confirm(\"参与抽奖必须登录, 是否登录?\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                User.toLogin();\n            });\n        },\n        hasLucky() {\n            let batch = 1;\n            if (this.allActive) batch = 10;\n            goodLucky(this.ID, { batch }).then((res) => {\n                console.log(res);\n            });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/blindbox/index.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=750939b6&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=750939b6&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=style&index=0&id=750939b6&prod&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}